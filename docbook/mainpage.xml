<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<chapter xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_mainpage">

<para>O presente software foi desenvolvido no contexto académico e deve ser utilizado sem qualquer garantia por conta e risco do utilizador.</para>

<para><link xlink:href="https://travis-ci.com/nargotik/PL"></link></para>

<para><emphasis role="bold">Autores:</emphasis><itemizedlist>
<listitem>
<para>José Moura <link xlink:href="mailto:a13742@alunos.ipca.pt">a13742@alunos.ipca.pt</link></para>
</listitem><listitem>
<para>Óscar Silva <link xlink:href="mailto:a14383@alunos.ipca.pt">a14383@alunos.ipca.pt</link></para>
</listitem><listitem>
<para>Daniel Filipe <link xlink:href="mailto:a17442@alunos.ipca.pt">a17442@alunos.ipca.pt</link></para>
</listitem></itemizedlist>
</para>
<section xml:id="_index_1autotoc_md1">
<title>Introdução</title>

<para>Para a realização deste trabalho foram utilizadas as ferramentas abaixo descritas:<itemizedlist>
<listitem>
<para>flex (versão 2.6.0)</para>
</listitem><listitem>
<para>libsqlite3-dev</para>
</listitem><listitem>
<para>sqlite3 (Opcional)</para>
</listitem></itemizedlist>
</para>

<para>Utilizamos uma motor de base de dados simples (sqlite) de forma a importar toda a informação contida no ficheiro de teste para a base de dados e poder efectuar consultas de qualquer informação directamente na base de dados.</para>
</section>
<section xml:id="_index_1autotoc_md2">
<title>Requisitos</title>

<para>Libs necessárias instalação em Ubuntu (pode variar com outras distribuições) <literallayout><computeroutput>apt-get&#32;install&#32;libsqlite3-dev
</computeroutput></literallayout> Existe a necessidade de, pelo menos, 2Gb de memoria RAM para processar o ficheiro de teste fornecido pelo professor. </para>
</section>
<section xml:id="_index_1autotoc_md3">
<title>Utilização / Compilação</title>

<para>Para compilar as aplicações necessárias simplesmente é necessário efectuar o comando: <literallayout><computeroutput>$&#32;make
</computeroutput></literallayout></para>

<para>Para efectuar a importação do ficheiro fornecido utilizamos o comando abaixo. <literallayout><computeroutput>utilizador@lesi-ipca:~/PL$&#32;./bin/import&#32;&lt;&#32;test_file.tsv
[...]
Comment&#32;Detected:&#32;###&#32;tconst&#32;&#32;&#32;&#32;titleType&#32;&#32;&#32;&#32;&#32;&#32;&#32;primaryTitle&#32;&#32;&#32;&#32;originalTitle&#32;&#32;&#32;isAdult&#32;startYear&#32;&#32;&#32;&#32;&#32;&#32;&#32;endYear&#32;runtimeMinutes&#32;&#32;genres
[...]
Inserts&#32;Movies&#32;&#32;Actors
[...]
Comment&#32;Detected:&#32;###&#32;&#32;nconst&#32;&#32;&#32;primaryName&#32;&#32;&#32;&#32;&#32;birthYear&#32;&#32;&#32;&#32;&#32;&#32;&#32;deathYear&#32;&#32;&#32;&#32;&#32;&#32;&#32;primaryProfession&#32;&#32;&#32;&#32;&#32;&#32;&#32;knownForTitles
[...]
.\N\N\N\N\N...
[...]
&#32;Movies:6223386&#32;
&#32;Actors:9626431&#32;
utilizador@lesi-ipca:~/PL$&#32;ls&#32;-lah
[...]
-rw-r--r--&#32;&#32;1&#32;utilizador&#32;&#32;utilizador&#32;&#32;&#32;&#32;&#32;&#32;&#32;3,1G&#32;out&#32;23&#32;23:28&#32;database.db
[...]
utilizador@lesi-ipca:~/PL$
</computeroutput></literallayout></para>

<para>Para efectuarmos a listagem do pedido apenas teremos de executar a aplicação display como mostrado abaixo:</para>

<para><literallayout><computeroutput>utilizador@lesi-ipca:~/PL$&#32;./bin/display
Showing&#32;info&#32;from&#32;database

*&#32;Chris&#32;Bailey
*&#32;Daniel&#32;Torres
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Walkin&apos;&#32;the&#32;Way
*&#32;David&#32;Jewell
*&#32;Jennifer&#32;Watkins
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Go&#32;Time!
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Mark
*&#32;Jesús&#32;Daniel&#32;Torres
*&#32;Julia&#32;Lawson
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Hlala&#32;Kwabafileyo
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Triptiek&#32;II
*&#32;Oscar&#32;Silva
*&#32;Reggie&#32;Bush
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Bad&#32;Jokes
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Simms&#32;&amp;&#32;Lefkoe:&#32;The&#32;Show
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;-&#32;Walking&#32;on&#32;Dead&#32;Fish
*&#32;Shiela&#32;Martin
*&#32;Stefania&#32;Zadra
*&#32;Ursula&#32;Gehrmann
utilizador@lesi-ipca:~/PL$&#32;
</computeroutput></literallayout> Após testes feito em uma máquina virtual Ubuntu com 8Gb de RAM verificamos que o tratamento do ficheiro fornecido pelo professor e colocação desses dados em base de dados demorou:<itemizedlist>
<listitem>
<para>Filmes - 4 Minutos</para>
</listitem><listitem>
<para>Actores - 20 Minutos</para>
</listitem></itemizedlist>
</para>
</section>
<section xml:id="_index_1autotoc_md4">
<title>Estrutura de flex</title>
<section xml:id="_index_1autotoc_md5">
<title>Extração de Filmes</title>

<para><para><link linkend="_todo_1_todo000001">Tarefa</link> 
<para><itemizedlist>
<listitem>
<para>Explicar a abordagem </para>
</listitem></itemizedlist>
</para>
</para>   
    <figure>
        <title>
Diagrama Movie        </title>
        <mediaobject>
            <imageobject>
                <imagedata align="center" valign="middle" scalefit="0" fileref="WC_Movie.png"></imagedata>
            </imageobject>
        <!--
Diagrama Movie
        -->
        </mediaobject>
    </figure>
</para>

<para><informaltable frame='bottom'><tgroup cols='1'><colspec align='center'/><tbody><row><entry align='center'>
</entry></row></tbody></tgroup></informaltable>
 </para>
</section>
<section xml:id="_index_1autotoc_md7">
<title>Extração de Actores</title>

<para><para><link linkend="_todo_1_todo000002">Tarefa</link> 
<para><itemizedlist>
<listitem>
<para>Explicar a abordagem </para>
</listitem></itemizedlist>
</para>
</para>   
    <figure>
        <title>
Diagrama Actor        </title>
        <mediaobject>
            <imageobject>
                <imagedata align="center" valign="middle" scalefit="0" fileref="WC_Actor.png"></imagedata>
            </imageobject>
        <!--
Diagrama Actor
        -->
        </mediaobject>
    </figure>
</para>

<para><informaltable frame='bottom'><tgroup cols='1'><colspec align='center'/><tbody><row><entry align='center'>
</entry></row></tbody></tgroup></informaltable>
</para>
</section>
</section>
<section xml:id="_index_1autotoc_md9">
<title>Estrutura de Base de dados:</title>

<para><literallayout><computeroutput>DROP&#32;TABLE&#32;IF&#32;EXISTS&#32;movies;
CREATE&#32;TABLE&#32;movies&#32;(
&#32;&#32;&#32;&#32;movie_id&#32;TEXT&#32;PRIMARY&#32;KEY,
&#32;&#32;&#32;&#32;titleType&#32;TEXT&#32;NOT&#32;NULL,
&#32;&#32;&#32;&#32;primaryTitle&#32;TEXT&#32;NOT&#32;NULL,
&#32;&#32;&#32;&#32;originalTitle&#32;TEXT&#32;NOT&#32;NULL,
&#32;&#32;&#32;&#32;isAdult&#32;INTEGER&#32;NOT&#32;NULL,
&#32;&#32;&#32;&#32;startYear&#32;INTEGER&#32;NOT&#32;NULL,
&#32;&#32;&#32;&#32;endYear&#32;INTEGER&#32;NOT&#32;NULL,
&#32;&#32;&#32;&#32;runtimeMinutes&#32;INTEGER&#32;NOT&#32;NULL
);

DROP&#32;TABLE&#32;IF&#32;EXISTS&#32;movies_genres;
CREATE&#32;TABLE&#32;movies_genres&#32;(
&#32;&#32;&#32;&#32;movie_id&#32;TEXT,
&#32;&#32;&#32;&#32;genre&#32;TEXT,
&#32;&#32;&#32;&#32;PRIMARY&#32;KEY&#32;(movie_id&#32;,&#32;genre)
);

DROP&#32;TABLE&#32;IF&#32;EXISTS&#32;actors;
CREATE&#32;TABLE&#32;actors&#32;(
&#32;&#32;&#32;&#32;actor_id&#32;TEXT&#32;PRIMARY&#32;KEY,
&#32;&#32;&#32;&#32;primaryName&#32;TEXT&#32;NOT&#32;NULL,
&#32;&#32;&#32;&#32;birthYear&#32;INTEGER&#32;NOT&#32;NULL,
&#32;&#32;&#32;&#32;deathYear&#32;INTEGER&#32;NULL
);
CREATE&#32;INDEX&#32;idx_name&#32;ON&#32;actors&#32;(primaryName);

DROP&#32;TABLE&#32;IF&#32;EXISTS&#32;actors_profession;
CREATE&#32;TABLE&#32;actors_profession&#32;(
&#32;&#32;&#32;&#32;actor_id&#32;TEXT,
&#32;&#32;&#32;&#32;profession&#32;TEXT,
&#32;&#32;&#32;&#32;PRIMARY&#32;KEY&#32;(actor_id&#32;,&#32;profession)
);

DROP&#32;TABLE&#32;IF&#32;EXISTS&#32;actors_movies;
CREATE&#32;TABLE&#32;actors_movies&#32;(
&#32;&#32;&#32;&#32;actor_id&#32;TEXT,
&#32;&#32;&#32;&#32;movie_id&#32;TEXT,
&#32;&#32;&#32;&#32;PRIMARY&#32;KEY&#32;(actor_id&#32;,&#32;movie_id&#32;)
);
</computeroutput></literallayout></para>
</section>
<section xml:id="_index_1autotoc_md10">
<title>Conclusão</title>

<para>Podemos mostrar desta forma a importância das expressões regulares e aplicações do género do flex pois conseguimos tratar de um enorme ficheiro com 18 milhões de registos e colocar numa base de dados para tratamento posterior e armazenamento dos dados.</para>

<para>Hoje em dia cada vez mais há necessidades de migração de sistemas antigos ou de dados para sistemas organizados do género de bases de dados e podemos utilizar esta ferramenta flex como outras ferramentas que utilizem expressões regulares.</para>

<para>Assim sendo tarefas como data minning podem ser muito utilizadas com o uso de expressões regulares.</para>

<para>Abaixo mostramos alguns exemplo de dados complexos que podemos retirar depois de ter a informação normalizada.</para>
<section xml:id="_index_1autotoc_md11">
<title>Exemplos de extração de dados:</title>

<para>Se quisermos saber o número de actores que participaram em filmes de drama realizados em 2012 Bastará correr esta Query SQL. <literallayout><computeroutput>SELECT&#32;Sum(filmes)&#32;
FROM&#32;&#32;&#32;(&#32;
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;SELECT&#32;&#32;&#32;Count(*)&#32;AS&#32;filmes&#32;
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;FROM&#32;&#32;&#32;&#32;&#32;movies,&#32;
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;movies_genres,&#32;
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;actors,&#32;
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;actors_movies&#32;
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;WHERE&#32;&#32;&#32;&#32;actors_movies.movie_id&#32;=&#32;movies.movie_id&#32;
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;AND&#32;&#32;&#32;&#32;&#32;&#32;actors.actor_id&#32;=&#32;actors_movies.actor_id&#32;
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;AND&#32;&#32;&#32;&#32;&#32;&#32;movies.movie_id&#32;=&#32;movies_genres.movie_id&#32;
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;AND&#32;&#32;&#32;&#32;&#32;&#32;movies_genres.genre&#32;=&#32;&quot;drama&quot;&#32;
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;AND&#32;&#32;&#32;&#32;&#32;&#32;movies.startyear&#32;=&#32;2012&#32;
&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;GROUP&#32;BY&#32;actors.actor_id)&#32;a;
</computeroutput></literallayout></para>
</section>
</section>
<section xml:id="_index_1autotoc_md12">
<title>Bibliografia</title>

<para><itemizedlist>
<listitem>
<para><link xlink:href="https://github.com/westes/flex">GitHub Flex</link> </para>
</listitem></itemizedlist>
</para>
</section>
</chapter>
