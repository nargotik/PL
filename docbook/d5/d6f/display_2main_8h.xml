<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_display_2main_8h">
<title>Referência ao ficheiro src/display/main.h</title>
<indexterm><primary>src/display/main.h</primary></indexterm>
<para>

<para>Ficheiro de header da aplicação. </para>
 
</para>
<simplesect>
    <title>Estruturas de Dados    </title>
        <itemizedlist>
            <listitem><para>struct <link linkend="_struct_movie">Movie</link></para>

<para>Estrutura que contem um filme. </para>
</listitem>
            <listitem><para>struct <link linkend="_struct_actor">Actor</link></para>

<para>Estrutura que contem um actor. </para>
</listitem>
        </itemizedlist>
</simplesect>
<simplesect>
    <title>Macros    </title>
        <itemizedlist>
            <listitem><para>#define <link linkend="_display_2main_8h_1a39dc88d73783e112dbfcf98adbdbefa6">DATABASE</link>   &quot;database.db&quot;</para>

<para>Ficheiro da Base de dados. </para>
</listitem>
            <listitem><para>#define <link linkend="_display_2main_8h_1a528b4a36c14b40b6b7a96b1df6362045">YYLMAX</link>   1048576</para>
</listitem>
        </itemizedlist>
</simplesect>
<simplesect>
    <title>Funções    </title>
        <itemizedlist>
            <listitem><para>int <link linkend="_display_2main_8h_1ae249aa44396558ba330fcc187770eaec">DbQuery</link> (char *sql)</para>

<para>Executa uma query na base de dados. </para>
</listitem>
            <listitem><para>int <link linkend="_display_2main_8h_1a57fdb20d13a9132ccad1393ab0310117">DbConnect</link> ()</para>

<para>Conecta à base de dados. </para>
</listitem>
            <listitem><para>int <link linkend="_display_2main_8h_1aaf970157c29051e078655f59116e9e13">DbDisconnect</link> ()</para>

<para>Disconecta da Base de dados. </para>
</listitem>
        </itemizedlist>
</simplesect>
<section>
<title>Descrição detalhada</title>

<para>Ficheiro de header da aplicação. </para>

<para><formalpara><title>Autor</title>

<para><itemizedlist>
<listitem>
<para>José Moura &lt;a13742|at|alunos.ipca.pt&gt;</para>
</listitem><listitem>
<para>Óscar Silva &lt;a14383|at|alunos.ipca.pt&gt;</para>
</listitem><listitem>
<para>Daniel Filipe &lt;a17442|at|alunos.ipca.pt&gt; </para>
</listitem></itemizedlist>
</para>
</formalpara>
<formalpara><title>Data</title>

<para>17 Out 2019 </para>
</formalpara>
</para>
</section>
<section>
<title>Documentação das macros</title>
<anchor xml:id="_display_2main_8h_1a39dc88d73783e112dbfcf98adbdbefa6"/>    <section>
    <title>DATABASE</title>
<indexterm><primary>DATABASE</primary><secondary>main.h</secondary></indexterm>
<indexterm><primary>main.h</primary><secondary>DATABASE</secondary></indexterm>
<para><computeroutput>#define DATABASE   &quot;database.db&quot;</computeroutput></para><para>

<para>Ficheiro da Base de dados. </para>
</para>
    </section><anchor xml:id="_display_2main_8h_1a528b4a36c14b40b6b7a96b1df6362045"/>    <section>
    <title>YYLMAX</title>
<indexterm><primary>YYLMAX</primary><secondary>main.h</secondary></indexterm>
<indexterm><primary>main.h</primary><secondary>YYLMAX</secondary></indexterm>
<para><computeroutput>#define YYLMAX   1048576</computeroutput></para></section>
</section>
<section>
<title>Documentação das funções</title>
<anchor xml:id="_display_2main_8h_1a57fdb20d13a9132ccad1393ab0310117"/>    <section>
    <title>DbConnect()</title>
<indexterm><primary>DbConnect</primary><secondary>main.h</secondary></indexterm>
<indexterm><primary>main.h</primary><secondary>DbConnect</secondary></indexterm>
<para><computeroutput>int DbConnect ( )</computeroutput></para><para>

<para>Conecta à base de dados. </para>
</para>

<para><formalpara><title>Retorna</title>

<para>1|0</para>
</formalpara>
Conecta à base de dados.</para>

<para><para><link linkend="_todo_1_todo000003">Tarefa</link> 
<para>check rc bug </para>
</para><formalpara><title>Veja também</title>

<para><link linkend="_display_2main_8c_1ac6509c6fe4cbf7bde170597172f8a288">rc</link> </para>
</formalpara>
<formalpara><title>Retorna</title>

<para>success=1 / fail != 1 </para>
</formalpara>
</para>
<programlisting>48 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
49 
50 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_display_2main_8c_1ac6509c6fe4cbf7bde170597172f8a288">rc</link>;
51 &#32;&#32;&#32;&#32;<link linkend="_display_2main_8c_1ac6509c6fe4cbf7bde170597172f8a288">rc</link>&#32;=&#32;sqlite3_open_v2(<link linkend="_display_2main_8h_1a39dc88d73783e112dbfcf98adbdbefa6">DATABASE</link>,&#32;&amp;<link linkend="_display_2main_8c_1ad6e663497d2c934364b3bcf07496b30b">db</link>,&#32;SQLITE_OPEN_READWRITE&#32;|&#32;SQLITE_OPEN_CREATE,&#32;NULL&#32;);
52 
53 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_display_2main_8c_1ac6509c6fe4cbf7bde170597172f8a288">rc</link>&#32;!=&#32;SQLITE_OK)&#32;{
54 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;fprintf(stderr,&#32;<emphasis role="stringliteral">&quot;Cannot&#32;open&#32;database:&#32;%s\n&quot;</emphasis>,&#32;sqlite3_errmsg(<link linkend="_display_2main_8c_1ad6e663497d2c934364b3bcf07496b30b">db</link>));
55 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;sqlite3_close(<link linkend="_display_2main_8c_1ad6e663497d2c934364b3bcf07496b30b">db</link>);
56 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;0;
57 &#32;&#32;&#32;&#32;}
58 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;1;
59 }
</programlisting>    </section><anchor xml:id="_display_2main_8h_1aaf970157c29051e078655f59116e9e13"/>    <section>
    <title>DbDisconnect()</title>
<indexterm><primary>DbDisconnect</primary><secondary>main.h</secondary></indexterm>
<indexterm><primary>main.h</primary><secondary>DbDisconnect</secondary></indexterm>
<para><computeroutput>int DbDisconnect ( )</computeroutput></para><para>

<para>Disconecta da Base de dados. </para>
</para>

<para><formalpara><title>Retorna</title>

<para>1|0</para>
</formalpara>
Disconecta da Base de dados.</para>

<para><formalpara><title>Veja também</title>

<para><link linkend="_display_2main_8c_1a57fdb20d13a9132ccad1393ab0310117">DbConnect</link> </para>
</formalpara>
<formalpara><title>Retorna</title>

<para>success=1 / fail != 1 </para>
</formalpara>
</para>
<programlisting>66 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
67 &#32;&#32;&#32;&#32;sqlite3_close(<link linkend="_display_2main_8c_1ad6e663497d2c934364b3bcf07496b30b">db</link>);
68 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;1;
69 }
</programlisting>    </section><anchor xml:id="_display_2main_8h_1ae249aa44396558ba330fcc187770eaec"/>    <section>
    <title>DbQuery()</title>
<indexterm><primary>DbQuery</primary><secondary>main.h</secondary></indexterm>
<indexterm><primary>main.h</primary><secondary>DbQuery</secondary></indexterm>
<para><computeroutput>int DbQuery (char * sql)</computeroutput></para><para>

<para>Executa uma query na base de dados. </para>
</para>

<para>
                <formalpara>
                    <title>
Parâmetros                    </title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
                                <entry>sql</entry>
                                <entry>
<para>srting da query </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                <formalpara><title>Veja também</title>

<para><link linkend="_import_2main_8c_1a028a79b8ba7f7bac70036e9ee3c1e1d5">DbInitialize</link> </para>
</formalpara>
<formalpara><title>Retorna</title>

<para></para>
</formalpara>
</para>
<programlisting>246 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;{
247 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">char</emphasis>&#32;*err_msg&#32;=&#32;0;
248 &#32;&#32;&#32;&#32;<link linkend="_display_2main_8c_1ac6509c6fe4cbf7bde170597172f8a288">rc</link>&#32;=&#32;sqlite3_exec(<link linkend="_display_2main_8c_1ad6e663497d2c934364b3bcf07496b30b">db</link>,&#32;sql,&#32;NULL,&#32;NULL,&#32;&amp;err_msg);
249 
250 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(<link linkend="_display_2main_8c_1ac6509c6fe4cbf7bde170597172f8a288">rc</link>&#32;!=&#32;SQLITE_OK)&#32;{
251 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;fprintf(stderr,&#32;<emphasis role="stringliteral">&quot;SQL&#32;error:&#32;%s\n&quot;</emphasis>,&#32;err_msg);
252 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;sqlite3_free(err_msg);
253 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;sqlite3_close(<link linkend="_display_2main_8c_1ad6e663497d2c934364b3bcf07496b30b">db</link>);
254 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;exit(1);
255 &#32;&#32;&#32;&#32;}
256 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;1;
257 }
</programlisting></section>
</section>
</section>
